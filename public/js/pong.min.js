var socket=io();$(document).ready(function(){var e={},t=null,o=null;$("#gameField").focus(),$("#gameField").bind("click",function(){$("#gameField").focus()});var i=function(e,t,o,i){switch(this.x=e,this.y=t,this.team=i,this.paddleid=o,i){case 1:this.orientation="horizontalPaddles",this.teamColor="#f00",this.modifier="left";break;case 2:this.orientation="verticalPaddles",this.teamColor="#0f0",this.modifier="top";break;case 3:this.orientation="verticalPaddles",this.teamColor="#00f",this.modifier="top";break;case 4:this.orientation="horizontalPaddles",this.teamColor="#f0f",this.modifier="left";break;default:console.log("invalid team number : %s",i)}this.element=document.createElement("div"),this.element.setAttribute("id",this.paddleid),this.element.setAttribute("class","paddles "+this.orientation);var s="border:2px solid #333;";s+="background-color:"+this.teamColor+";",s+="top:"+t+"px;left:"+e+"px;",this.element.setAttribute("style",s),$("#gameField").append(this.element)};socket.on("newGuy",function(t){new i(t.x,t.y,t.paddleid,t.team);e[t.id]={team:t.team,x:t.x,y:t.y},console.log("creating new guy"),console.log(t)}),socket.on("userdata",function(t){e=t.u,Object.keys(e).forEach(function(t){new i(e[t].x,e[t].y,t,e[t].team)})}),socket.on("moveresponse",function(e){$("#"+e.p).css(e.m,e.v)}),socket.on("socketid",function(e){t=e.s,o=e.p}),socket.on("userleft",function(t){var o=t.p;console.log("leaver : "+o);var i=Object.keys(e).indexOf(o);console.log("isuser : "+i),$("#"+t.p).remove(),-1!==i&&(console.log("removing "+o+" from userdata"),delete e[t.p])}),$("#gameField").on("mousemove",function(e){var i={x:e.clientX,y:e.clientY},s={v:i,p:o,s:t};null!==t&&socket.emit("move",s)}),socket.on("balldata",function(e){$(".balls").remove(),Object.keys(e).forEach(function(t){var o=document.createElement("div");o.setAttribute("class","balls");var i="top:"+e[t].y+"px;left:"+e[t].x+"px;";o.setAttribute("style",i),$("#gameField").append(o)})}),socket.on("score",function(e){$("#score"+e.t).text(parseInt($("#score"+e.t).text())+1)})});